# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ

- электронные чеки в json-виде - документо-ориентированная БД
- склады и автомобильные дороги для логистической компании - графовые БД. Дороги - связи, склады - объекты.
- генеалогические деревья - иерархическая БД.
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации - БД типа "Ключ-значение".
- отношения клиент-покупка для интернет-магазина - реляционная БД, в случае если требуется электронный документооборот - документо-ориентированная БД.

---

## Задача 2

Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

## Ответ

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись) - классифицируется как AP, PA/EC.
2. При сетевых сбоях, система может разделиться на 2 раздельных кластера - CA, PA/EL.
3. Система может не прислать корректный ответ или сбросить соединение - CP, PC/EC

---

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Ответ

В одной системе сочетаться принципы BASE и ACID не могут, так как используют разный подход к транзакциям. ACID делает упор на надёжность и предсказуемость, BASE на производительность в ущерб надёжности и предсказуемости.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

## Ответ

Redis - БД с высокой производительностью, за счет хранения данных в памяти.
По этой причине подобного рода БД хорошо зарекомендовали себя в рамках кеша, могут использоваться, как модуль большой системы и работать в паре с другими сервисами в рамках микросервисной архитектуры. Также, если рассматривать redis, как sub/pub систему, то БД не хранит у себя сообщения, отправляет потребителям и затем удаляет. 
Redis хранит данные в памяти и периодически делает слепки на жесткий диск. Может получится так, что при отказе Redis какие-то данные могут не успеть оказаться в снапшоте, они не восстановятся при восстановлении самого Redis, так мы можем потерять события и соответсвующие уведомления в pub/sub


